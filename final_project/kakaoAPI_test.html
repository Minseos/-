<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Kakao 지도 - 가게 마커 표시</title>
</head>
<body>
    <div id="map" style="width:100%; height:90vh;"></div>

    <script type="text/javascript" src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=63e3067448f3fd1670dd681def99e897&libraries=services"></script>
    <script>
        // Kakao 지도 초기화
        var mapContainer = document.getElementById('map');
        var mapOption = {
            center: new kakao.maps.LatLng(37.489680, 127.032901), // 초기 중심 좌표
            level: 3 // 확대 레벨
        };
        var map = new kakao.maps.Map(mapContainer, mapOption);

        // Kakao API 지오코더 객체 생성
        var geocoder = new kakao.maps.services.Geocoder();

        // 서버에서 가져올 데이터 (임시로 하드코딩)
        var stores = [
            { "store_name": "스노우폭스 뱅뱅점", "address": "서울특별시 강남구 역삼로 123" },
            { "store_name": "맥도날드 서초뱅뱅점", "address": "서울특별시 서초구 서초대로 456" },
            { "store_name": "큐뮬러스", "address": "서울특별시 강남구 테헤란로 789" }
        ];

        // 마커 생성 함수
        stores.forEach(store => {
            geocoder.addressSearch(store.address, function(result, status) {
                if (status === kakao.maps.services.Status.OK) {
                    var coords = new kakao.maps.LatLng(result[0].y, result[0].x);

                    // 마커 추가
                    var marker = new kakao.maps.Marker({
                        map: map,
                        position: coords,
                        title: store.store_name
                    });

                    // 마커 클릭 이벤트
                    kakao.maps.event.addListener(marker, 'click', function() {
                        alert(`가게 이름: ${store.store_name}\n주소: ${store.address}`);
                        // 여기에서 원하는 동작 추가 가능 (예: 새 창 열기)
                    });
                } else {
                    console.error(`주소 변환 실패: ${store.address}`);
                }
            });
        });
    </script>
</body>
</html>
